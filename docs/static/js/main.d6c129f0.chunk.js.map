{"version":3,"sources":["ImageCropping.js","Garment.js","CanvasComponent.js","GarmentComponent.js","WardrobeComponent.js","App.js","reportWebVitals.js","index.js"],"names":["ImageCropping","cropping","this","x","y","w","h","Garment","name","category","origin","destination","selected","order","z","thumbnail","t","CanvasComponent","props","side","strawman","canvas","createRef","maxScaleFactor","state","scaleFactor","getScaleFactor","window","addEventListener","setState","drawCanvas","className","i18n","lang","capitalize","toUpperCase","ref","width","height","onClick","downloadImage","tempCanvas","getTempCanvas","realContext","current","getContext","clearRect","drawImage","document","createElement","tempContext","drawWardrobe","wardrobe","context","getClothes","sort","a","b","garment","clothes","garmentName","push","img","link","download","toBlob","blob","url","URL","createObjectURL","href","click","innerWidth","Component","GarmentComponent","selectGarment","src","style","alt","WardrobeComponent","Object","keys","map","App","selectedGarment","navigator","language","toLowerCase","split","_","includes","getWardrobe","merge","config","loaded","Image","onload","clothesOrigin","clothesDestination","categoryName","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","String","prototype","substr","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d6c129f0.chunk.js","sourcesContent":["export default class ImageCropping {\n    constructor(cropping) {\n        this.x = cropping.x;\n        this.y = cropping.y;\n        this.w = cropping.w;\n        this.h = cropping.h;\n    }\n}","import ImageCropping from \"./ImageCropping\";\n\nexport default class Garment {\n\n    constructor(name, category, origin, destination) {\n        this.selected = false;\n        this.name = name;\n        this.category = category;\n        this.origin = new ImageCropping(origin);\n        this.destination = new ImageCropping(destination);\n        this.order = destination.z;\n        this.thumbnail = new ImageCropping(origin.t)\n    }\n\n}","import React, { Component, createRef } from 'react';\nimport './CanvasComponent.css';\nimport Garment from './Garment';\nimport i18n from './i18n';\n\nclass CanvasComponent extends Component{\n\n    constructor(props) {\n        super(props);\n        this.side = this.props.strawman.h;\n        this.canvas = createRef();\n        this.maxScaleFactor = 0.7;\n        this.state = {\n            scaleFactor: this.getScaleFactor()\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener(\"resize\", () => {\n            this.setState({scaleFactor: this.getScaleFactor()});\n        })\n        this.drawCanvas();\n    }\n\n    componentDidUpdate() {\n        this.drawCanvas();\n    }\n\n    render() {\n        return (\n            <div className=\"canvas-component\">\n                <h1>\n                    <div>{i18n[\"make\"][this.props.lang].capitalize()}</div>\n                    <div>{i18n[\"strawman\"][this.props.lang].toUpperCase()}</div>\n                </h1>\n                <canvas ref={this.canvas} width={this.side * this.state.scaleFactor} height={this.side * this.state.scaleFactor}/>\n                <div className=\"download\" onClick={() => {\n                    this.downloadImage();\n                }}>{i18n[\"download\"][this.props.lang].capitalize()}</div>\n            </div>\n        );\n    }\n\n    drawCanvas() {\n        let tempCanvas = this.getTempCanvas();\n\n        let realContext = this.canvas.current.getContext(\"2d\");\n        realContext.clearRect(0, 0, this.side * this.state.scaleFactor, this.side * this.state.scaleFactor);\n        realContext.drawImage(tempCanvas, 0, 0, this.side * this.state.scaleFactor, this.side * this.state.scaleFactor);\n    }\n\n    getTempCanvas() {\n        let tempCanvas = document.createElement(\"canvas\");\n        tempCanvas.width = this.side;\n        tempCanvas.height = this.side;\n        let tempContext = tempCanvas.getContext(\"2d\");\n        this.drawImage(this.props.strawman, this.props.strawman, tempContext);\n        this.drawWardrobe(this.props.wardrobe, tempContext);\n        return tempCanvas;\n    }\n\n    drawWardrobe(wardrobe, context){\n        for(let garment of this.getClothes(wardrobe).sort((a, b) => a.order - b.order)){\n            this.drawImage(garment.origin, garment.destination, context);\n        }\n    }\n\n    getClothes(wardrobe){\n        let clothes = [];\n        for(let garmentName in wardrobe) {\n            if(wardrobe[garmentName] instanceof Garment ){\n                if(wardrobe[garmentName].selected){\n                    clothes.push(wardrobe[garmentName]);\n                }\n            }\n            else {\n                clothes.push(...this.getClothes(wardrobe[garmentName]));\n            }\n        }\n        return clothes;\n    }\n\n    drawImage(origin, destination, context){\n        context.drawImage(this.props.img, origin.x, origin.y, origin.w, origin.h, destination.x, destination.y, destination.w, destination.h);\n    }\n\n    downloadImage(){\n        let link = document.createElement('a');\n        link.download = 'strawman.png';\n        let canvas = this.getTempCanvas();\n        canvas.toBlob((blob) => {\n            let url = URL.createObjectURL(blob);\n            link.href = url;\n            link.click();\n        })\n    }\n\n    getScaleFactor(){\n        if(window.innerWidth < this.side * this.maxScaleFactor){\n            return window.innerWidth / this.side;\n        }\n        return this.maxScaleFactor;\n    }\n}\n\nexport default CanvasComponent;\n","import React, { Component } from 'react';\nimport './GarmentComponent.css';\nimport i18n from './i18n.json';\n\nclass GarmentComponent extends Component{\n\n    render() {\n        return (\n            <div\n                className={`garment${this.props.garment.selected ? \" selected\" : \"\"}`}\n                onClick={() => {\n                    this.props.selectGarment(this.props.garment);\n                }}\n            >\n                <img\n                    src='./merge.png'\n                    style={{\n                        \"--x\": `${this.props.garment.thumbnail.x}px`,\n                        \"--y\": `${this.props.garment.thumbnail.y}px`,\n                        \"--w\": `${this.props.garment.thumbnail.w}px`,\n                        \"--h\": `${this.props.garment.thumbnail.h}px`\n                    }}\n                    alt={i18n[this.props.garment.name][this.props.lang]}\n                />\n                <figcaption>{i18n[this.props.garment.name][this.props.lang]}</figcaption>\n            </div>\n        );\n    }\n}\n\nexport default GarmentComponent;\n","import React, { Component } from 'react';\nimport './WardrobeComponent.css';\nimport i18n from './i18n.json';\nimport GarmentComponent from './GarmentComponent';\n\nclass WardrobeComponent extends Component{\n\n    render() {\n        return (\n            <div className=\"wardrobe\">\n                <h1>{i18n['accessories'][this.props.lang].capitalize()}</h1>\n                {\n                    Object.keys(this.props.wardrobe).map((category) => {\n                        return (\n                            <div className=\"category\" key={category}>\n                                <span>{i18n[category][this.props.lang].capitalize()}</span>\n                                <div className=\"content\">\n                                    {\n                                        Object.keys(this.props.wardrobe[category]).map((garmentName) => {\n                                            return (\n                                                <GarmentComponent\n                                                    key={garmentName}\n                                                    garment={this.props.wardrobe[category][garmentName]}\n                                                    selectGarment={this.props.selectGarment}\n                                                    lang={this.props.lang}\n                                                ></GarmentComponent>\n                                            );\n                                        })\n                                    }\n                                </div>\n                            </div>\n                        )\n                    })\n                }\n            </div>\n        );\n    }\n}\n\nexport default WardrobeComponent;\n","import React, { Component } from 'react';\nimport './App.css';\nimport CanvasComponent from './CanvasComponent';\nimport WardrobeComponent from './WardrobeComponent';\nimport merge from './merge.json';\nimport config from './config.json';\nimport Garment from './Garment';\nimport ImageCropping from './ImageCropping';\nimport i18n from './i18n.json';\n\nclass App extends Component{\n    \n    constructor(props){\n        super(props);\n        let lang;\n        try{\n            lang = navigator.language.toLowerCase().split('-')[0];\n        } catch(_){}\n        if(!['en', 'es'].includes(lang)){\n            lang = 'en';\n        }\n        this.state = {\n            wardrobe: this.getWardrobe(merge, config),\n            lang: lang,\n            loaded: false\n        }\n    }\n\n    componentDidMount() {\n        this.img = new Image();\n        this.img.src = './merge.png';\n        this.img.onload = () => {\n            this.setState({ loaded: true });\n        }\n    }\n\n    getWardrobe(clothesOrigin, clothesDestination){\n        let wardrobe = {};\n        for(let categoryName in clothesOrigin){\n            if(categoryName !== \"strawman\"){\n                wardrobe[categoryName] = {};\n                for(let garmentName in clothesOrigin[categoryName]) {\n                    wardrobe[categoryName][garmentName] = new Garment(\n                        garmentName,\n                        wardrobe[categoryName],\n                        clothesOrigin[categoryName][garmentName],\n                        clothesDestination[categoryName]\n                    );\n                }\n            }\n        }\n        return wardrobe;\n    }\n\n    selectGarment = (selectedGarment) => {\n        if(!selectedGarment.selected){\n            for(let garmentName in selectedGarment.category){\n                let garment = selectedGarment.category[garmentName];\n                if(garment !== selectedGarment){\n                    garment.selected = false;\n                }\n            }\n        }\n        selectedGarment.selected = !selectedGarment.selected;\n        this.setState({});\n    }\n\n    render() {\n        return (\n            <>\n            {\n                this.state.loaded &&\n                <div className=\"app\">\n                    <CanvasComponent\n                        wardrobe={this.state.wardrobe}\n                        strawman={new ImageCropping(merge.strawman)}\n                        lang={this.state.lang}\n                        img={this.img}\n                    />\n                    <WardrobeComponent\n                        wardrobe={this.state.wardrobe}\n                        selectGarment={this.selectGarment}\n                        lang={this.state.lang}\n                    />\n                </div>\n                }\n                {\n                    !this.state.loaded &&\n                    <div className=\"loading\">\n                        <img src=\"./favicon.png\" alt={i18n[\"loading\"][this.state.lang]} />\n                        {i18n[\"loading\"][this.state.lang]}\n                    </div>\n                }\n            </>\n        );\n    }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n// eslint-disable-next-line no-extend-native\nString.prototype.capitalize = function() {\n  return this[0].toUpperCase() + this.substr(1, this.length);\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}